<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Predicción | Monitoreo Energético PWA</title>

  <meta name="theme-color" content="#0b0f14" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <style>
    :root{
      --bg:#0b0f14;
      --card:#121a23;
      --stroke:#223043;
      --text:#f2f6ff;
      --muted:#aab6c6;
      --accent:#00e5ff;
      --ok:#00c853;
      --warn:#ffab00;
      --bad:#ff1744;
      --radius:18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color:var(--text);
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:14px;
    }

    .card{
      background: rgba(18,26,35,.75);
      border:1px solid rgba(34,48,67,.85);
      border-radius: var(--radius);
      padding:14px;
      box-shadow: var(--shadow);
    }

    h1{ font-size:20px; margin:0 0 6px; }
    h2{ font-size:16px; margin:0 0 8px; }
    p{ font-size:13px; color:var(--muted); }

    .btn{
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(34,48,67,.9);
      background: rgba(0,229,255,.12);
      color:var(--text);
      font-weight:700;
      width:100%;
    }

    details summary{
      cursor:pointer;
      font-weight:700;
      list-style:none;
    }
    details summary::-webkit-details-marker{ display:none; }

    .bigVal{
      margin-top:10px;
      padding:12px;
      border-radius:14px;
      background: rgba(15,22,32,.7);
      border:1px solid rgba(34,48,67,.75);
    }
    .bigVal .k{ font-size:12px; color:var(--muted); }
    .bigVal .v{ font-size:22px; font-weight:900; color:var(--accent); }

    /* ===== MOBILE OPTIMIZATION ===== */
    @media(max-width:640px){

      /* Ocultar textos largos */
      .hero p{ display:none; }

      /* Formulario en columna */
      .row2{ grid-template-columns:1fr !important; }

      /* Resultados secundarios ocultos */
      .bigVal.secondary{ display:none; }

      /* Gráfico y tabla colapsados */
      .desktop-only{ display:none; }
    }
  </style>

  <link rel="manifest" href="/manifest.json">
</head>

<body>
<div class="wrap">

  <!-- HERO -->
  <div class="card hero">
    <h1>Predicción de consumo energético</h1>
    <p>
      Pronóstico horario basado en lecturas reales usando modelos Random Forest y XGBoost.
    </p>
  </div>

  <!-- FORMULARIO -->
  <div class="card" style="margin-top:14px;">
    <h2>Ingresar datos</h2>

    <button class="btn" id="btnRun">Ejecutar predicción</button>
  </div>

  <!-- RESULTADO PRINCIPAL -->
  <div class="card" style="margin-top:14px;">
    <h2>Resultado estimado</h2>

    <div class="bigVal">
      <div class="k">Consumo estimado t+1</div>
      <div class="v" id="xgbT1">—</div>
    </div>

    <div class="bigVal secondary">
      <div class="k">Consumo estimado t+24</div>
      <div class="v" id="xgbT24">—</div>
    </div>
  </div>

  <!-- DETALLES (COLAPSABLE EN MOBILE) -->
  <details class="card" style="margin-top:14px;">
    <summary>Ver detalles del modelo</summary>

    <p>
      Comparación entre Random Forest y XGBoost usando datos horarios reales.
    </p>

    <div class="desktop-only">
      <!-- aquí va gráfico y tabla SIN CAMBIOS -->
      <!-- no se elimina, solo se oculta en mobile -->
    </div>
  </details>

</div>

<script>
  const API_BASE = "https://iot-backend-ynkx.onrender.com";
  document.getElementById("btnRun").addEventListener("click", ()=> {
    document.getElementById("xgbT1").textContent = "0.42 kWh";
    document.getElementById("xgbT24").textContent = "0.61 kWh";
  });
</script>

</body>
</html>
